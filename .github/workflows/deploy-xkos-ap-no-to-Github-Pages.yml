name: Build adocs and deploy xkos-ap-no to Github Pages

on:
  push:
    branches:
      - develop
    paths:
      - xkos-ap-no/**
  workflow_dispatch:

jobs:
  adoc_build_deploy:
    uses: Informasjonsforvaltning/workflows/.github/workflows/specification-github-pages.yaml@main
    name: deploy xkos-ap-no-begrep to GitHub Pages
    with:
      publish_branch: gh-pages
      publish_dir: xkos-ap-no
      destination_dir: ./xkos-ap-no
      keep_files: true
      program: "asciidoctor -D xkos-ap-no -o index.html -a lang=en xkos-ap-no/main.adoc"
    secrets:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
